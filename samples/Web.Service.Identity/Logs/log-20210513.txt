2021-05-13 09:27:42.182 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-13 09:27:42.776 +03:00 [INF] Starting service
2021-05-13 09:27:44.641 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-13 09:27:44.642 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-13 09:27:44.644 +03:00 [INF] Hosting environment: Development
2021-05-13 09:27:44.644 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-13 09:27:46.900 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-13 09:27:48.228 +03:00 [INF] Executed DbCommand (159ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-13 09:27:48.775 +03:00 [INF] Executed DbCommand (126ms) [Parameters=[@__roleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[RoleId], [t].[RoleCode], [t].[Title], [t0].[RoleId], [t0].[PermissionId], [t0].[PermissionId0], [t0].[EntityDefinitionCode], [t0].[PermissionCode]
FROM (
    SELECT TOP(1) [r].[RoleId], [r].[RoleCode], [r].[Title]
    FROM [Cofoundry].[Role] AS [r]
    WHERE [r].[RoleId] = @__roleId_0
) AS [t]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[PermissionId] AS [PermissionId0], [p].[EntityDefinitionCode], [p].[PermissionCode]
    FROM [Cofoundry].[RolePermission] AS [r0]
    INNER JOIN [Cofoundry].[Permission] AS [p] ON [r0].[PermissionId] = [p].[PermissionId]
) AS [t0] ON [t].[RoleId] = [t0].[RoleId]
ORDER BY [t].[RoleId], [t0].[RoleId], [t0].[PermissionId], [t0].[PermissionId0]
2021-05-13 09:27:48.903 +03:00 [INF] Executed DbCommand (93ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EntityDefinitionCode], [e].[Name]
FROM [Cofoundry].[EntityDefinition] AS [e]
2021-05-13 09:27:49.021 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PermissionId], [p].[EntityDefinitionCode], [p].[PermissionCode]
FROM [Cofoundry].[Permission] AS [p]
2021-05-13 09:27:49.130 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[RoleCode], [r].[Title], [t].[RoleId], [t].[PermissionId], [t].[PermissionId0], [t].[EntityDefinitionCode], [t].[PermissionCode]
FROM [Cofoundry].[Role] AS [r]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[PermissionId] AS [PermissionId0], [p].[EntityDefinitionCode], [p].[PermissionCode]
    FROM [Cofoundry].[RolePermission] AS [r0]
    INNER JOIN [Cofoundry].[Permission] AS [p] ON [r0].[PermissionId] = [p].[PermissionId]
) AS [t] ON [r].[RoleId] = [t].[RoleId]
ORDER BY [r].[RoleId], [t].[RoleId], [t].[PermissionId], [t].[PermissionId0]
2021-05-13 09:27:49.209 +03:00 [INF] "2021-05-13T06:27:48.4682343Z" SUCCESS executing command Cofoundry.Domain.RegisterPermissionsAndRolesCommand. User 1
2021-05-13 09:27:49.350 +03:00 [INF] Process completed
2021-05-13 09:27:52.648 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - -
2021-05-13 09:27:52.667 +03:00 [INF] CORS policy execution successful.
2021-05-13 09:27:52.740 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - - - 204 - - 95.5401ms
2021-05-13 09:27:52.770 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/auth/login application/json 67
2021-05-13 09:27:52.774 +03:00 [INF] CORS policy execution successful.
2021-05-13 09:27:52.885 +03:00 [INF] Executing endpoint 'Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin)'
2021-05-13 09:27:52.935 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(Cofoundry.Web.Identity.LoginViewModel) on controller Cofoundry.Web.Admin.AuthController (Cofoundry.Web.Admin).
2021-05-13 09:27:53.273 +03:00 [INF] Executing action method Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin) - Validation state: "Valid"
2021-05-13 09:27:56.827 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-13 09:27:56.925 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE (([u].[UserId] = @__id_0) AND ([u].[IsDeleted] <> CAST(1 AS bit))) AND (([u].[IsSystemAccount] <> CAST(1 AS bit)) AND ([u].[IsDeleted] <> CAST(1 AS bit)))
2021-05-13 09:27:56.934 +03:00 [INF] "2021-05-13T06:27:56.9304535Z" SUCCESS executing command Cofoundry.Domain.LogUserInWithCredentialsCommand. User 2
2021-05-13 09:27:58.666 +03:00 [INF] Executed action method Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin), returned result Microsoft.AspNetCore.Mvc.OkResult in 5379.9393ms.
2021-05-13 09:27:58.679 +03:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200
2021-05-13 09:27:58.693 +03:00 [INF] Executed action Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin) in 5746.6211ms
2021-05-13 09:27:58.696 +03:00 [INF] Executed endpoint 'Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin)'
2021-05-13 09:27:58.707 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/auth/login application/json 67 - 200 0 - 5936.7043ms
2021-05-13 09:38:29.155 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - -
2021-05-13 09:38:29.158 +03:00 [INF] CORS policy execution successful.
2021-05-13 09:38:29.163 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - - - 204 - - 30.1812ms
2021-05-13 09:38:29.212 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/auth/login application/json 67
2021-05-13 09:38:29.227 +03:00 [INF] CORS policy execution successful.
2021-05-13 09:38:29.276 +03:00 [INF] Executing endpoint 'Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin)'
2021-05-13 09:38:29.281 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(Cofoundry.Web.Identity.LoginViewModel) on controller Cofoundry.Web.Admin.AuthController (Cofoundry.Web.Admin).
2021-05-13 09:38:29.329 +03:00 [INF] Executing action method Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin) - Validation state: "Valid"
2021-05-13 09:38:31.994 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-13 09:38:32.070 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE (([u].[UserId] = @__id_0) AND ([u].[IsDeleted] <> CAST(1 AS bit))) AND (([u].[IsSystemAccount] <> CAST(1 AS bit)) AND ([u].[IsDeleted] <> CAST(1 AS bit)))
2021-05-13 09:38:32.075 +03:00 [INF] "2021-05-13T06:38:32.0747228Z" SUCCESS executing command Cofoundry.Domain.LogUserInWithCredentialsCommand. User 2
2021-05-13 09:38:37.178 +03:00 [INF] Executed action method Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin), returned result Microsoft.AspNetCore.Mvc.OkResult in 7845.8729ms.
2021-05-13 09:38:37.188 +03:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200
2021-05-13 09:38:37.191 +03:00 [INF] Executed action Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin) in 7908.1519ms
2021-05-13 09:38:37.197 +03:00 [INF] Executed endpoint 'Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin)'
2021-05-13 09:38:37.206 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/auth/login application/json 67 - 200 0 - 7995.1222ms
2021-05-13 09:38:37.368 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/getAll - -
2021-05-13 09:38:37.370 +03:00 [INF] CORS policy execution successful.
2021-05-13 09:38:37.372 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/getAll - - - 204 - - 3.9197ms
2021-05-13 09:38:37.376 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/users/getAll application/json 24
2021-05-13 09:38:37.378 +03:00 [INF] CORS policy execution successful.
2021-05-13 09:38:37.382 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/users/getAll application/json 24 - 404 0 - 6.3009ms
2021-05-13 09:38:42.356 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/roles/getAll - -
2021-05-13 09:38:42.358 +03:00 [INF] CORS policy execution successful.
2021-05-13 09:38:42.359 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/roles/getAll - - - 204 - - 3.5530ms
2021-05-13 09:38:42.364 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/roles/getAll application/json 24
2021-05-13 09:38:42.365 +03:00 [INF] CORS policy execution successful.
2021-05-13 09:38:42.367 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/roles/getAll application/json 24 - 404 0 - 3.6750ms
2021-05-13 09:38:43.512 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/getAll - -
2021-05-13 09:38:43.522 +03:00 [INF] CORS policy execution successful.
2021-05-13 09:38:43.524 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/getAll - - - 204 - - 11.9256ms
2021-05-13 09:38:43.533 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/users/getAll application/json 24
2021-05-13 09:38:43.537 +03:00 [INF] CORS policy execution successful.
2021-05-13 09:38:43.539 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/users/getAll application/json 24 - 404 0 - 6.4488ms
2021-05-13 09:38:44.731 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/roles/getAll - -
2021-05-13 09:38:44.737 +03:00 [INF] CORS policy execution successful.
2021-05-13 09:38:44.738 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/roles/getAll - - - 204 - - 7.6496ms
2021-05-13 09:38:44.745 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/roles/getAll application/json 24
2021-05-13 09:38:44.750 +03:00 [INF] CORS policy execution successful.
2021-05-13 09:38:44.751 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/roles/getAll application/json 24 - 404 0 - 6.7474ms
2021-05-13 09:38:53.612 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/getAll - -
2021-05-13 09:38:53.617 +03:00 [INF] CORS policy execution successful.
2021-05-13 09:38:53.618 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/getAll - - - 204 - - 6.2947ms
2021-05-13 09:38:53.624 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/users/getAll application/json 24
2021-05-13 09:38:53.625 +03:00 [INF] CORS policy execution successful.
2021-05-13 09:38:53.626 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/users/getAll application/json 24 - 404 0 - 2.7863ms
2021-05-13 09:38:58.986 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/roles/getAll - -
2021-05-13 09:38:58.989 +03:00 [INF] CORS policy execution successful.
2021-05-13 09:38:58.990 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/roles/getAll - - - 204 - - 4.4662ms
2021-05-13 09:38:58.998 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/roles/getAll application/json 24
2021-05-13 09:38:58.999 +03:00 [INF] CORS policy execution successful.
2021-05-13 09:38:59.000 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/roles/getAll application/json 24 - 404 0 - 2.3995ms
2021-05-13 09:39:00.003 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/getAll - -
2021-05-13 09:39:00.006 +03:00 [INF] CORS policy execution successful.
2021-05-13 09:39:00.008 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/getAll - - - 204 - - 4.7509ms
2021-05-13 09:39:00.016 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/users/getAll application/json 24
2021-05-13 09:39:00.019 +03:00 [INF] CORS policy execution successful.
2021-05-13 09:39:00.020 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/users/getAll application/json 24 - 404 0 - 3.4626ms
2021-05-13 09:51:54.444 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/roles/getAll - -
2021-05-13 09:51:54.621 +03:00 [INF] CORS policy execution successful.
2021-05-13 09:51:54.656 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/roles/getAll - - - 204 - - 211.3643ms
2021-05-13 09:51:54.810 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/roles/getAll application/json 24
2021-05-13 09:51:55.169 +03:00 [INF] CORS policy execution successful.
2021-05-13 09:51:55.326 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/roles/getAll application/json 24 - 404 0 - 515.9834ms
2021-05-13 09:51:56.459 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/getAll - -
2021-05-13 09:51:56.745 +03:00 [INF] CORS policy execution successful.
2021-05-13 09:51:56.817 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/getAll - - - 204 - - 357.9690ms
2021-05-13 09:51:57.004 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/users/getAll application/json 24
2021-05-13 09:51:57.014 +03:00 [INF] CORS policy execution successful.
2021-05-13 09:51:57.016 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/users/getAll application/json 24 - 404 0 - 11.5522ms
2021-05-13 10:00:05.139 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/users/getAll - -
2021-05-13 10:00:05.152 +03:00 [INF] CORS policy execution successful.
2021-05-13 10:00:05.154 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/users/getAll - - - 204 - - 15.7073ms
2021-05-13 10:00:05.204 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/users/getAll application/json 24
2021-05-13 10:00:05.207 +03:00 [INF] CORS policy execution successful.
2021-05-13 10:00:05.212 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/users/getAll application/json 24 - 404 0 - 8.2962ms
