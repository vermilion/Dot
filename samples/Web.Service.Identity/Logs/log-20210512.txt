2021-05-12 15:53:58.062 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 15:53:58.463 +03:00 [INF] Starting service
2021-05-12 15:53:59.542 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 15:53:59.543 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 15:53:59.543 +03:00 [INF] Hosting environment: Development
2021-05-12 15:53:59.544 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 15:54:01.040 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 15:54:01.887 +03:00 [INF] Executed DbCommand (116ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 15:54:02.024 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 15:54:02.816 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.UserContextService.GetSystemUserContextAsync() in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Users\Services\UserContextService.cs:line 66
   at Cofoundry.Domain.CQS.Internal.ExecutionContextFactory.CreateSystemUserExecutionContextAsync(IExecutionContext executionContextToCopy) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\ExecutionContext\ExecutionContextFactory.cs:line 73
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 31
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 15:54:02.982 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 15:54:04.217 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 15:54:04.255 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 15:54:04.265 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 15:54:05.126 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.UserContextService.GetSystemUserContextAsync() in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Users\Services\UserContextService.cs:line 66
   at Cofoundry.Domain.CQS.Internal.ExecutionContextFactory.CreateSystemUserExecutionContextAsync(IExecutionContext executionContextToCopy) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\ExecutionContext\ExecutionContextFactory.cs:line 73
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 31
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 15:54:05.134 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 15:54:06.377 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 15:54:06.412 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 15:54:06.416 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 15:54:07.194 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.UserContextService.GetSystemUserContextAsync() in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Users\Services\UserContextService.cs:line 66
   at Cofoundry.Domain.CQS.Internal.ExecutionContextFactory.CreateSystemUserExecutionContextAsync(IExecutionContext executionContextToCopy) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\ExecutionContext\ExecutionContextFactory.cs:line 73
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 31
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 15:54:07.208 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 15:54:08.361 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 15:54:08.393 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 15:54:08.397 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 15:54:08.902 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.UserContextService.GetSystemUserContextAsync() in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Users\Services\UserContextService.cs:line 66
   at Cofoundry.Domain.CQS.Internal.ExecutionContextFactory.CreateSystemUserExecutionContextAsync(IExecutionContext executionContextToCopy) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\ExecutionContext\ExecutionContextFactory.cs:line 73
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 31
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 15:54:08.918 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 15:54:14.030 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 15:54:14.059 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 15:54:14.065 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 15:54:14.561 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.UserContextService.GetSystemUserContextAsync() in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Users\Services\UserContextService.cs:line 66
   at Cofoundry.Domain.CQS.Internal.ExecutionContextFactory.CreateSystemUserExecutionContextAsync(IExecutionContext executionContextToCopy) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\ExecutionContext\ExecutionContextFactory.cs:line 73
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 31
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 15:54:14.605 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 15:54:20.068 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 15:55:17.305 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 15:55:17.513 +03:00 [INF] Starting service
2021-05-12 15:55:19.340 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 15:55:19.427 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 15:55:19.428 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 15:55:19.429 +03:00 [INF] Hosting environment: Development
2021-05-12 15:55:19.429 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 15:55:20.637 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 15:55:22.346 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 15:55:23.924 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 15:55:29.525 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 15:55:34.161 +03:00 [INF] Application is shutting down...
2021-05-12 15:55:58.812 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 15:56:00.076 +03:00 [INF] Starting service
2021-05-12 15:56:32.536 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 15:56:32.690 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 15:56:32.691 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 15:56:32.693 +03:00 [INF] Hosting environment: Development
2021-05-12 15:56:32.694 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 15:56:34.013 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 15:57:03.668 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 15:58:33.797 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 15:58:39.099 +03:00 [INF] Starting service
2021-05-12 15:58:47.440 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 15:58:47.440 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 15:58:47.441 +03:00 [INF] Hosting environment: Development
2021-05-12 15:58:47.441 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 15:58:52.546 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 15:58:53.230 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 15:58:53.332 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 15:58:54.029 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.UserContextService.GetSystemUserContextAsync() in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Users\Services\UserContextService.cs:line 66
   at Cofoundry.Domain.CQS.Internal.ExecutionContextFactory.CreateSystemUserExecutionContextAsync(IExecutionContext executionContextToCopy) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\ExecutionContext\ExecutionContextFactory.cs:line 73
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 31
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 15:58:54.123 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 15:59:00.325 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 15:59:00.367 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 15:59:00.371 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 15:59:00.952 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.UserContextService.GetSystemUserContextAsync() in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Users\Services\UserContextService.cs:line 66
   at Cofoundry.Domain.CQS.Internal.ExecutionContextFactory.CreateSystemUserExecutionContextAsync(IExecutionContext executionContextToCopy) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\ExecutionContext\ExecutionContextFactory.cs:line 73
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 31
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 15:59:00.979 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 15:59:49.841 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 15:59:49.940 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 15:59:49.946 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 15:59:50.793 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.UserContextService.GetSystemUserContextAsync() in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Users\Services\UserContextService.cs:line 66
   at Cofoundry.Domain.CQS.Internal.ExecutionContextFactory.CreateSystemUserExecutionContextAsync(IExecutionContext executionContextToCopy) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\ExecutionContext\ExecutionContextFactory.cs:line 73
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 31
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 15:59:50.847 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 15:59:52.053 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 15:59:52.119 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 15:59:52.123 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 15:59:52.845 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.UserContextService.GetSystemUserContextAsync() in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Users\Services\UserContextService.cs:line 66
   at Cofoundry.Domain.CQS.Internal.ExecutionContextFactory.CreateSystemUserExecutionContextAsync(IExecutionContext executionContextToCopy) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\ExecutionContext\ExecutionContextFactory.cs:line 73
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 31
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 15:59:52.881 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 16:00:05.497 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:00:05.538 +03:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 16:00:05.569 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 16:00:06.385 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.UserContextService.GetSystemUserContextAsync() in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Users\Services\UserContextService.cs:line 66
   at Cofoundry.Domain.CQS.Internal.ExecutionContextFactory.CreateSystemUserExecutionContextAsync(IExecutionContext executionContextToCopy) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\ExecutionContext\ExecutionContextFactory.cs:line 73
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 31
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 16:00:06.500 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 16:00:28.386 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:00:28.420 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 16:00:28.449 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 16:00:29.301 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.UserContextService.GetSystemUserContextAsync() in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Users\Services\UserContextService.cs:line 66
   at Cofoundry.Domain.CQS.Internal.ExecutionContextFactory.CreateSystemUserExecutionContextAsync(IExecutionContext executionContextToCopy) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\ExecutionContext\ExecutionContextFactory.cs:line 73
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 31
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 16:00:29.315 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 16:01:34.566 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:01:38.835 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 16:01:38.839 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method42(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method42(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2021-05-12 16:02:16.787 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
2021-05-12 16:02:16.793 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method44(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method44(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2021-05-12 16:02:19.051 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
2021-05-12 16:02:19.084 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method44(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method44(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2021-05-12 16:02:57.177 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
2021-05-12 16:02:57.182 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method44(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method44(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2021-05-12 16:03:40.608 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 16:03:40.790 +03:00 [INF] Starting service
2021-05-12 16:03:41.929 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 16:03:42.006 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 16:03:42.007 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 16:03:42.008 +03:00 [INF] Hosting environment: Development
2021-05-12 16:03:42.008 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 16:03:43.344 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 16:03:44.747 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 16:03:46.116 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 16:03:51.601 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 16:03:56.959 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 16:04:10.769 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:04:11.617 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 16:04:11.789 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 16:04:12.588 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.UserContextService.GetSystemUserContextAsync() in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Users\Services\UserContextService.cs:line 66
   at Cofoundry.Domain.CQS.Internal.ExecutionContextFactory.CreateSystemUserExecutionContextAsync(IExecutionContext executionContextToCopy) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\ExecutionContext\ExecutionContextFactory.cs:line 73
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 31
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 16:04:12.650 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 16:04:33.206 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:04:34.773 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
2021-05-12 16:04:34.780 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method41(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method41(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2021-05-12 16:04:49.275 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
2021-05-12 16:04:49.280 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method41(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method41(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2021-05-12 16:04:52.525 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 16:04:52.529 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 16:04:53.026 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.UserContextService.GetSystemUserContextAsync() in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Users\Services\UserContextService.cs:line 66
   at Cofoundry.Domain.CQS.Internal.ExecutionContextFactory.CreateSystemUserExecutionContextAsync(IExecutionContext executionContextToCopy) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\ExecutionContext\ExecutionContextFactory.cs:line 73
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 31
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 16:04:53.044 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 16:05:22.247 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:05:22.292 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 16:05:22.296 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 16:05:22.984 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.UserContextService.GetSystemUserContextAsync() in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Users\Services\UserContextService.cs:line 66
   at Cofoundry.Domain.CQS.Internal.ExecutionContextFactory.CreateSystemUserExecutionContextAsync(IExecutionContext executionContextToCopy) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\ExecutionContext\ExecutionContextFactory.cs:line 73
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 31
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 16:05:22.993 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 16:05:31.201 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:05:46.559 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
2021-05-12 16:05:46.564 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method41(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method41(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2021-05-12 16:05:50.634 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
2021-05-12 16:05:50.638 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method41(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method41(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2021-05-12 16:06:10.465 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 16:06:10.475 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method49(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method49(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2021-05-12 16:06:16.059 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 16:06:16.068 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 16:06:16.557 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method22(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.UserContextService.GetSystemUserContextAsync() in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Users\Services\UserContextService.cs:line 66
   at Cofoundry.Domain.CQS.Internal.ExecutionContextFactory.CreateSystemUserExecutionContextAsync(IExecutionContext executionContextToCopy) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\ExecutionContext\ExecutionContextFactory.cs:line 73
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 31
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 16:06:16.573 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 16:07:16.643 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 16:07:16.928 +03:00 [INF] Starting service
2021-05-12 16:07:18.077 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 16:07:18.078 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 16:07:18.079 +03:00 [INF] Hosting environment: Development
2021-05-12 16:07:18.079 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 16:07:25.298 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:07:27.472 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
2021-05-12 16:07:27.580 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method21(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method21(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2021-05-12 16:09:33.768 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 16:09:33.960 +03:00 [INF] Starting service
2021-05-12 16:09:35.506 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 16:09:35.506 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 16:09:35.507 +03:00 [INF] Hosting environment: Development
2021-05-12 16:09:35.508 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 16:09:39.098 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:09:39.445 +03:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[FailedAuthenticationAttemptId], [f].[AttemptDate], [f].[IPAddress], [f].[UserName]
FROM [Cofoundry].[FailedAuthenticationAttempt] AS [f]
2021-05-12 16:09:46.323 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
2021-05-12 16:09:46.439 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method23(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method23(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2021-05-12 16:10:08.513 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 16:10:08.776 +03:00 [INF] Starting service
2021-05-12 16:10:10.079 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 16:10:10.234 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 16:10:10.237 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 16:10:10.241 +03:00 [INF] Hosting environment: Development
2021-05-12 16:10:10.243 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 16:10:11.536 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 16:10:17.914 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:10:18.255 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
2021-05-12 16:10:18.409 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method21(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method21(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2021-05-12 16:10:22.915 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method21(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at Cofoundry.Domain.Internal.UserContextService.QuerySystemUser() in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Users\Services\UserContextService.cs:line 130
   at Cofoundry.Domain.Internal.UserContextService.GetSystemUserContextAsync() in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Users\Services\UserContextService.cs:line 66
   at Cofoundry.Domain.CQS.Internal.ExecutionContextFactory.CreateSystemUserExecutionContextAsync(IExecutionContext executionContextToCopy) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\ExecutionContext\ExecutionContextFactory.cs:line 73
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 31
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 16:10:22.981 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 16:12:36.355 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:12:36.414 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
2021-05-12 16:12:36.431 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method21(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method21(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2021-05-12 16:12:36.989 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method21(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at Cofoundry.Domain.Internal.UserContextService.QuerySystemUser() in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Users\Services\UserContextService.cs:line 130
   at Cofoundry.Domain.Internal.UserContextService.GetSystemUserContextAsync() in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Users\Services\UserContextService.cs:line 66
   at Cofoundry.Domain.CQS.Internal.ExecutionContextFactory.CreateSystemUserExecutionContextAsync(IExecutionContext executionContextToCopy) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\ExecutionContext\ExecutionContextFactory.cs:line 73
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 31
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 16:12:36.999 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 16:12:43.894 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:12:43.927 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
2021-05-12 16:12:43.930 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method21(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method21(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2021-05-12 16:12:49.032 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method21(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at Cofoundry.Domain.Internal.UserContextService.QuerySystemUser() in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Users\Services\UserContextService.cs:line 130
   at Cofoundry.Domain.Internal.UserContextService.GetSystemUserContextAsync() in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Users\Services\UserContextService.cs:line 66
   at Cofoundry.Domain.CQS.Internal.ExecutionContextFactory.CreateSystemUserExecutionContextAsync(IExecutionContext executionContextToCopy) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\ExecutionContext\ExecutionContextFactory.cs:line 73
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 31
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 16:12:49.047 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 16:17:11.645 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 16:17:11.788 +03:00 [INF] Starting service
2021-05-12 16:17:13.144 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 16:17:13.144 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 16:17:13.145 +03:00 [INF] Hosting environment: Development
2021-05-12 16:17:13.145 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 16:25:36.122 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 16:25:36.467 +03:00 [INF] Starting service
2021-05-12 16:25:37.910 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 16:25:37.913 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 16:25:37.914 +03:00 [INF] Hosting environment: Development
2021-05-12 16:25:37.914 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 16:25:42.881 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:25:43.588 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
2021-05-12 16:25:43.738 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method21(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method21(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2021-05-12 16:26:41.045 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 16:26:41.285 +03:00 [INF] Starting service
2021-05-12 16:26:42.603 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 16:26:42.653 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 16:26:42.654 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 16:26:42.654 +03:00 [INF] Hosting environment: Development
2021-05-12 16:26:42.655 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 16:26:43.971 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 16:26:45.602 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 16:26:47.185 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 16:26:54.590 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:26:55.414 +03:00 [INF] Executed DbCommand (128ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
2021-05-12 16:26:55.556 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method19(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method19(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2021-05-12 16:26:56.078 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method19(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at Cofoundry.Domain.Internal.UserContextService.QuerySystemUser() in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Users\Services\UserContextService.cs:line 130
   at Cofoundry.Domain.Internal.UserContextService.GetSystemUserContextAsync() in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Users\Services\UserContextService.cs:line 66
   at Cofoundry.Domain.CQS.Internal.ExecutionContextFactory.CreateSystemUserExecutionContextAsync(IExecutionContext executionContextToCopy) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\ExecutionContext\ExecutionContextFactory.cs:line 73
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 31
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 16:26:56.169 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 16:27:04.185 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:27:04.220 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
2021-05-12 16:27:04.224 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method19(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method19(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2021-05-12 16:27:39.960 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 16:27:40.109 +03:00 [INF] Starting service
2021-05-12 16:27:41.142 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 16:27:41.142 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 16:27:41.142 +03:00 [INF] Hosting environment: Development
2021-05-12 16:27:41.143 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 16:27:43.678 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:27:44.018 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
2021-05-12 16:27:44.137 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method19(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method19(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2021-05-12 16:32:26.612 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 16:32:26.758 +03:00 [INF] Starting service
2021-05-12 16:32:28.470 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 16:32:28.497 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 16:32:28.498 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 16:32:28.498 +03:00 [INF] Hosting environment: Development
2021-05-12 16:32:28.499 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 16:32:29.835 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 16:32:31.358 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 16:32:32.788 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 16:32:38.377 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 16:32:48.937 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:32:51.841 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
2021-05-12 16:32:51.952 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method19(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method19(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2021-05-12 16:33:11.971 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
2021-05-12 16:33:11.977 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method19(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method19(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2021-05-12 16:33:36.389 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
2021-05-12 16:33:36.398 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method19(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method19(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2021-05-12 16:35:55.588 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 16:35:55.756 +03:00 [INF] Starting service
2021-05-12 16:35:56.721 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 16:35:56.722 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 16:35:56.724 +03:00 [INF] Hosting environment: Development
2021-05-12 16:35:56.724 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 16:36:02.498 +03:00 [INF] Entity Framework Core 5.0.6 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:36:04.569 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
2021-05-12 16:36:04.669 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method19(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method19(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2021-05-12 16:41:01.925 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 16:41:02.076 +03:00 [INF] Starting service
2021-05-12 16:41:03.508 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 16:41:03.550 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 16:41:03.551 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 16:41:03.551 +03:00 [INF] Hosting environment: Development
2021-05-12 16:41:03.552 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 16:41:04.945 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 16:41:06.318 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 16:41:07.643 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 16:41:13.129 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 16:41:24.639 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:41:26.815 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
2021-05-12 16:41:27.001 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method19(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method19(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2021-05-12 16:41:33.445 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
2021-05-12 16:41:33.457 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method19(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method19(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2021-05-12 16:44:00.891 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 16:44:01.046 +03:00 [INF] Starting service
2021-05-12 16:44:01.928 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 16:44:01.929 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 16:44:01.930 +03:00 [INF] Hosting environment: Development
2021-05-12 16:44:01.930 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 16:44:05.049 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:44:05.453 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[Role] AS [r]
2021-05-12 16:44:08.083 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId]
FROM [Cofoundry].[RolePermission] AS [r]
2021-05-12 16:44:09.908 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserPasswordResetRequestId], [u].[CreateDate], [u].[IPAddress], [u].[IsComplete], [u].[Token], [u].[UserId]
FROM [Cofoundry].[UserPasswordResetRequest] AS [u]
2021-05-12 16:44:25.543 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
2021-05-12 16:44:25.607 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method86(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method86(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2021-05-12 16:45:34.044 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 16:45:34.262 +03:00 [INF] Starting service
2021-05-12 16:45:35.329 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 16:45:35.329 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 16:45:35.330 +03:00 [INF] Hosting environment: Development
2021-05-12 16:45:35.330 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 16:45:55.155 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:45:55.715 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
2021-05-12 16:46:26.793 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 16:46:26.985 +03:00 [INF] Starting service
2021-05-12 16:46:28.151 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 16:46:28.151 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 16:46:28.152 +03:00 [INF] Hosting environment: Development
2021-05-12 16:46:28.152 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 16:46:37.035 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:46:37.560 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
2021-05-12 16:47:13.527 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 16:48:21.517 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 16:48:21.687 +03:00 [INF] Starting service
2021-05-12 16:48:22.814 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 16:48:22.815 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 16:48:22.815 +03:00 [INF] Hosting environment: Development
2021-05-12 16:48:22.825 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 16:48:27.248 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:48:35.888 +03:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 16:48:35.993 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method20(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method20(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 16:48:36.931 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method20(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.UserContextService.GetSystemUserContextAsync() in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Users\Services\UserContextService.cs:line 66
   at Cofoundry.Domain.CQS.Internal.ExecutionContextFactory.CreateSystemUserExecutionContextAsync(IExecutionContext executionContextToCopy) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\ExecutionContext\ExecutionContextFactory.cs:line 73
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 31
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 16:48:37.032 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 16:49:25.886 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:49:27.472 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
2021-05-12 16:49:27.482 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method39(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_Int32()
   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method39(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2021-05-12 16:50:29.862 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 16:50:30.017 +03:00 [INF] Starting service
2021-05-12 16:50:31.332 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 16:50:31.402 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 16:50:31.404 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 16:50:31.406 +03:00 [INF] Hosting environment: Development
2021-05-12 16:50:31.408 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 16:50:38.301 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:50:43.918 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 16:50:56.706 +03:00 [INF] Executed DbCommand (117ms) [Parameters=[@__roleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[RoleId], [t].[RoleCode], [t].[Title], [t0].[RoleId], [t0].[PermissionId], [t0].[PermissionId0], [t0].[EntityDefinitionCode], [t0].[PermissionCode]
FROM (
    SELECT TOP(1) [r].[RoleId], [r].[RoleCode], [r].[Title]
    FROM [Cofoundry].[Role] AS [r]
    WHERE [r].[RoleId] = @__roleId_0
) AS [t]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[PermissionId] AS [PermissionId0], [p].[EntityDefinitionCode], [p].[PermissionCode]
    FROM [Cofoundry].[RolePermission] AS [r0]
    INNER JOIN [Cofoundry].[Permission] AS [p] ON [r0].[PermissionId] = [p].[PermissionId]
) AS [t0] ON [t].[RoleId] = [t0].[RoleId]
ORDER BY [t].[RoleId], [t0].[RoleId], [t0].[PermissionId], [t0].[PermissionId0]
2021-05-12 16:50:56.809 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EntityDefinitionCode], [e].[Name]
FROM [Cofoundry].[EntityDefinition] AS [e]
2021-05-12 16:50:56.968 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PermissionId], [p].[EntityDefinitionCode], [p].[PermissionCode]
FROM [Cofoundry].[Permission] AS [p]
2021-05-12 16:50:57.093 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_String()
   at System.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_String()
   at System.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 16:50:57.289 +03:00 [INF] "2021-05-12T13:50:54.0810596Z" FAILED executing command Cofoundry.Domain.RegisterPermissionsAndRolesCommand. User 1, Exception 'Data is Null. This method or property cannot be called on Null values.'
2021-05-12 16:50:58.513 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_String()
   at System.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.RegisterPermissionsAndRolesCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Roles\Commands\RegisterPermissionsAndRolesCommandHandler.cs:line 78
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 137
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 142
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteAsync(ICommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 114
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 32
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 16:50:58.738 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 16:58:02.191 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 16:58:02.431 +03:00 [INF] Starting service
2021-05-12 16:58:03.581 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 16:58:03.606 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 16:58:03.607 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 16:58:03.607 +03:00 [INF] Hosting environment: Development
2021-05-12 16:58:03.608 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 16:58:05.021 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 16:58:06.299 +03:00 [INF] Process failed, retrying in 1 seconds
2021-05-12 16:58:07.800 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 16:58:20.625 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:58:25.173 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 16:58:25.624 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__roleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[RoleId], [t].[RoleCode], [t].[Title], [t0].[RoleId], [t0].[PermissionId], [t0].[PermissionId0], [t0].[EntityDefinitionCode], [t0].[PermissionCode]
FROM (
    SELECT TOP(1) [r].[RoleId], [r].[RoleCode], [r].[Title]
    FROM [Cofoundry].[Role] AS [r]
    WHERE [r].[RoleId] = @__roleId_0
) AS [t]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[PermissionId] AS [PermissionId0], [p].[EntityDefinitionCode], [p].[PermissionCode]
    FROM [Cofoundry].[RolePermission] AS [r0]
    INNER JOIN [Cofoundry].[Permission] AS [p] ON [r0].[PermissionId] = [p].[PermissionId]
) AS [t0] ON [t].[RoleId] = [t0].[RoleId]
ORDER BY [t].[RoleId], [t0].[RoleId], [t0].[PermissionId], [t0].[PermissionId0]
2021-05-12 16:58:25.718 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EntityDefinitionCode], [e].[Name]
FROM [Cofoundry].[EntityDefinition] AS [e]
2021-05-12 16:58:25.828 +03:00 [INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PermissionId], [p].[EntityDefinitionCode], [p].[PermissionCode]
FROM [Cofoundry].[Permission] AS [p]
2021-05-12 16:58:25.912 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_String()
   at System.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_String()
   at System.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 16:58:26.225 +03:00 [INF] "2021-05-12T13:58:25.4010415Z" FAILED executing command Cofoundry.Domain.RegisterPermissionsAndRolesCommand. User 1, Exception 'Data is Null. This method or property cannot be called on Null values.'
2021-05-12 16:58:26.824 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_String()
   at System.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.RegisterPermissionsAndRolesCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Roles\Commands\RegisterPermissionsAndRolesCommandHandler.cs:line 78
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 137
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 142
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteAsync(ICommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 114
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 32
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 16:58:26.990 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 16:58:32.225 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:58:32.278 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 16:58:32.324 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EntityDefinitionCode], [e].[Name]
FROM [Cofoundry].[EntityDefinition] AS [e]
2021-05-12 16:58:32.357 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PermissionId], [p].[EntityDefinitionCode], [p].[PermissionCode]
FROM [Cofoundry].[Permission] AS [p]
2021-05-12 16:58:32.366 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at System.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at System.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 16:58:32.512 +03:00 [INF] "2021-05-12T13:58:32.2880985Z" FAILED executing command Cofoundry.Domain.RegisterPermissionsAndRolesCommand. User 1, Exception 'Data is Null. This method or property cannot be called on Null values.'
2021-05-12 16:58:33.320 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at System.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.RegisterPermissionsAndRolesCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Roles\Commands\RegisterPermissionsAndRolesCommandHandler.cs:line 78
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 137
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 142
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteAsync(ICommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 114
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 32
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 16:58:33.466 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 16:58:38.619 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:58:38.701 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 16:58:38.774 +03:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EntityDefinitionCode], [e].[Name]
FROM [Cofoundry].[EntityDefinition] AS [e]
2021-05-12 16:58:38.818 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PermissionId], [p].[EntityDefinitionCode], [p].[PermissionCode]
FROM [Cofoundry].[Permission] AS [p]
2021-05-12 16:58:38.821 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 16:58:39.030 +03:00 [INF] "2021-05-12T13:58:38.7079008Z" FAILED executing command Cofoundry.Domain.RegisterPermissionsAndRolesCommand. User 1, Exception 'Data is Null. This method or property cannot be called on Null values.'
2021-05-12 16:58:39.627 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.RegisterPermissionsAndRolesCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Roles\Commands\RegisterPermissionsAndRolesCommandHandler.cs:line 78
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 137
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 142
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteAsync(ICommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 114
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 32
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 16:58:39.639 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 16:58:44.877 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:59:03.832 +03:00 [INF] Executed DbCommand (105ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 16:59:03.926 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EntityDefinitionCode], [e].[Name]
FROM [Cofoundry].[EntityDefinition] AS [e]
2021-05-12 16:59:04.014 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PermissionId], [p].[EntityDefinitionCode], [p].[PermissionCode]
FROM [Cofoundry].[Permission] AS [p]
2021-05-12 16:59:04.021 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 16:59:04.235 +03:00 [INF] "2021-05-12T13:59:03.8521351Z" FAILED executing command Cofoundry.Domain.RegisterPermissionsAndRolesCommand. User 1, Exception 'Data is Null. This method or property cannot be called on Null values.'
2021-05-12 16:59:05.028 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.RegisterPermissionsAndRolesCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Roles\Commands\RegisterPermissionsAndRolesCommandHandler.cs:line 78
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 137
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 142
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteAsync(ICommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 114
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 32
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 16:59:05.052 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 16:59:10.214 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:59:10.262 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 16:59:10.320 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EntityDefinitionCode], [e].[Name]
FROM [Cofoundry].[EntityDefinition] AS [e]
2021-05-12 16:59:10.351 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PermissionId], [p].[EntityDefinitionCode], [p].[PermissionCode]
FROM [Cofoundry].[Permission] AS [p]
2021-05-12 16:59:10.353 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 16:59:10.497 +03:00 [INF] "2021-05-12T13:59:10.2741880Z" FAILED executing command Cofoundry.Domain.RegisterPermissionsAndRolesCommand. User 1, Exception 'Data is Null. This method or property cannot be called on Null values.'
2021-05-12 16:59:10.977 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.RegisterPermissionsAndRolesCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Roles\Commands\RegisterPermissionsAndRolesCommandHandler.cs:line 78
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 137
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 142
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteAsync(ICommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 114
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 32
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 16:59:10.995 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 16:59:16.110 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:59:16.158 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 16:59:16.214 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EntityDefinitionCode], [e].[Name]
FROM [Cofoundry].[EntityDefinition] AS [e]
2021-05-12 16:59:16.260 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PermissionId], [p].[EntityDefinitionCode], [p].[PermissionCode]
FROM [Cofoundry].[Permission] AS [p]
2021-05-12 16:59:16.263 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 16:59:16.422 +03:00 [INF] "2021-05-12T13:59:16.1660827Z" FAILED executing command Cofoundry.Domain.RegisterPermissionsAndRolesCommand. User 1, Exception 'Data is Null. This method or property cannot be called on Null values.'
2021-05-12 16:59:16.967 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.RegisterPermissionsAndRolesCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Roles\Commands\RegisterPermissionsAndRolesCommandHandler.cs:line 78
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 137
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 142
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteAsync(ICommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 114
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 32
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 16:59:16.988 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 16:59:22.182 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:59:22.222 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 16:59:22.271 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EntityDefinitionCode], [e].[Name]
FROM [Cofoundry].[EntityDefinition] AS [e]
2021-05-12 16:59:22.308 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PermissionId], [p].[EntityDefinitionCode], [p].[PermissionCode]
FROM [Cofoundry].[Permission] AS [p]
2021-05-12 16:59:22.312 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 16:59:22.490 +03:00 [INF] "2021-05-12T13:59:22.2304326Z" FAILED executing command Cofoundry.Domain.RegisterPermissionsAndRolesCommand. User 1, Exception 'Data is Null. This method or property cannot be called on Null values.'
2021-05-12 16:59:23.036 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.RegisterPermissionsAndRolesCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Roles\Commands\RegisterPermissionsAndRolesCommandHandler.cs:line 78
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 137
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 142
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteAsync(ICommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 114
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 32
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 16:59:23.051 +03:00 [INF] Process failed, retrying in 5 seconds
2021-05-12 16:59:28.391 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:59:28.435 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 16:59:28.478 +03:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EntityDefinitionCode], [e].[Name]
FROM [Cofoundry].[EntityDefinition] AS [e]
2021-05-12 16:59:28.514 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PermissionId], [p].[EntityDefinitionCode], [p].[PermissionCode]
FROM [Cofoundry].[Permission] AS [p]
2021-05-12 16:59:28.517 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 16:59:28.642 +03:00 [INF] "2021-05-12T13:59:28.4389560Z" FAILED executing command Cofoundry.Domain.RegisterPermissionsAndRolesCommand. User 1, Exception 'Data is Null. This method or property cannot be called on Null values.'
2021-05-12 16:59:29.177 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.RegisterPermissionsAndRolesCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Roles\Commands\RegisterPermissionsAndRolesCommandHandler.cs:line 78
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 137
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 142
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteAsync(ICommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 114
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 32
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 16:59:29.191 +03:00 [INF] Process failed, retrying in 15 seconds
2021-05-12 16:59:44.484 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 16:59:44.550 +03:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 16:59:44.701 +03:00 [INF] Executed DbCommand (134ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EntityDefinitionCode], [e].[Name]
FROM [Cofoundry].[EntityDefinition] AS [e]
2021-05-12 16:59:44.802 +03:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PermissionId], [p].[EntityDefinitionCode], [p].[PermissionCode]
FROM [Cofoundry].[Permission] AS [p]
2021-05-12 16:59:44.809 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 16:59:45.295 +03:00 [INF] "2021-05-12T13:59:44.5663518Z" FAILED executing command Cofoundry.Domain.RegisterPermissionsAndRolesCommand. User 1, Exception 'Data is Null. This method or property cannot be called on Null values.'
2021-05-12 16:59:46.197 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.RegisterPermissionsAndRolesCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Roles\Commands\RegisterPermissionsAndRolesCommandHandler.cs:line 78
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 137
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 142
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteAsync(ICommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 114
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 32
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 16:59:46.246 +03:00 [INF] Process failed, retrying in 15 seconds
2021-05-12 17:00:01.624 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 17:00:01.693 +03:00 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 17:00:01.763 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EntityDefinitionCode], [e].[Name]
FROM [Cofoundry].[EntityDefinition] AS [e]
2021-05-12 17:00:01.811 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PermissionId], [p].[EntityDefinitionCode], [p].[PermissionCode]
FROM [Cofoundry].[Permission] AS [p]
2021-05-12 17:00:01.828 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 17:00:02.066 +03:00 [INF] "2021-05-12T14:00:01.6988904Z" FAILED executing command Cofoundry.Domain.RegisterPermissionsAndRolesCommand. User 1, Exception 'Data is Null. This method or property cannot be called on Null values.'
2021-05-12 17:00:03.007 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.RegisterPermissionsAndRolesCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Roles\Commands\RegisterPermissionsAndRolesCommandHandler.cs:line 78
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 137
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 142
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteAsync(ICommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 114
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 32
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 17:00:03.059 +03:00 [INF] Process failed, retrying in 15 seconds
2021-05-12 17:00:18.313 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 17:00:18.381 +03:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 17:00:18.471 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EntityDefinitionCode], [e].[Name]
FROM [Cofoundry].[EntityDefinition] AS [e]
2021-05-12 17:00:18.522 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PermissionId], [p].[EntityDefinitionCode], [p].[PermissionCode]
FROM [Cofoundry].[Permission] AS [p]
2021-05-12 17:00:18.534 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 17:00:18.830 +03:00 [INF] "2021-05-12T14:00:18.3944729Z" FAILED executing command Cofoundry.Domain.RegisterPermissionsAndRolesCommand. User 1, Exception 'Data is Null. This method or property cannot be called on Null values.'
2021-05-12 17:00:19.506 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.get_String()
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.RegisterPermissionsAndRolesCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Roles\Commands\RegisterPermissionsAndRolesCommandHandler.cs:line 78
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 137
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 142
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteAsync(ICommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 114
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 32
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 17:00:19.530 +03:00 [INF] Process failed, retrying in 15 seconds
2021-05-12 17:01:16.372 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 17:01:16.546 +03:00 [INF] Starting service
2021-05-12 17:01:17.853 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 17:01:17.854 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 17:01:17.855 +03:00 [INF] Hosting environment: Development
2021-05-12 17:01:17.855 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 17:01:19.436 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 17:01:20.204 +03:00 [INF] Executed DbCommand (161ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 17:01:20.659 +03:00 [INF] Executed DbCommand (175ms) [Parameters=[@__roleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[RoleId], [t].[RoleCode], [t].[Title], [t0].[RoleId], [t0].[PermissionId], [t0].[PermissionId0], [t0].[EntityDefinitionCode], [t0].[PermissionCode]
FROM (
    SELECT TOP(1) [r].[RoleId], [r].[RoleCode], [r].[Title]
    FROM [Cofoundry].[Role] AS [r]
    WHERE [r].[RoleId] = @__roleId_0
) AS [t]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[PermissionId] AS [PermissionId0], [p].[EntityDefinitionCode], [p].[PermissionCode]
    FROM [Cofoundry].[RolePermission] AS [r0]
    INNER JOIN [Cofoundry].[Permission] AS [p] ON [r0].[PermissionId] = [p].[PermissionId]
) AS [t0] ON [t].[RoleId] = [t0].[RoleId]
ORDER BY [t].[RoleId], [t0].[RoleId], [t0].[PermissionId], [t0].[PermissionId0]
2021-05-12 17:01:20.797 +03:00 [INF] Executed DbCommand (101ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EntityDefinitionCode], [e].[Name]
FROM [Cofoundry].[EntityDefinition] AS [e]
2021-05-12 17:01:20.960 +03:00 [INF] Executed DbCommand (107ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PermissionId], [p].[EntityDefinitionCode], [p].[PermissionCode]
FROM [Cofoundry].[Permission] AS [p]
2021-05-12 17:01:21.045 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Cofoundry.Domain.Data.CofoundryDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_String()
   at System.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_String()
   at System.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-05-12 17:01:21.492 +03:00 [INF] "2021-05-12T14:01:20.3739273Z" FAILED executing command Cofoundry.Domain.RegisterPermissionsAndRolesCommand. User 1, Exception 'Data is Null. This method or property cannot be called on Null values.'
2021-05-12 17:01:22.730 +03:00 [ERR] Error executing update
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at System.Data.SqlClient.SqlBuffer.get_String()
   at System.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method186(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at Cofoundry.Domain.Internal.RegisterPermissionsAndRolesCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Roles\Commands\RegisterPermissionsAndRolesCommandHandler.cs:line 78
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 137
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 142
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteAsync(ICommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 114
   at Cofoundry.Domain.Installation.RegisterPermissionsAndRolesUpdateCommandHandler.ExecuteAsync(RegisterPermissionsAndRolesUpdateCommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Install\AlwaysUpdateCommands\RegisterPermissionsAndRolesUpdateCommandHandler.cs:line 32
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.ExecutePackage(UpdatePackage package, Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 134
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 98
   at Cofoundry.Core.AutoUpdate.Internal.AutoUpdateService.UpdateAsync(Nullable`1 cancellationToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Core\AutoUpdate\Services\AutoUpdateService.cs:line 104
   at Cofoundry.Web.AutoUpdateHostedService.TryUpdate(CancellationToken stoppingToken) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\App_Start\AutoUpdate\AutoUpdateHostedService.cs:line 86
2021-05-12 17:01:34.928 +03:00 [INF] Application is shutting down...
2021-05-12 17:03:48.770 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 17:03:48.952 +03:00 [INF] Starting service
2021-05-12 17:03:49.983 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 17:03:49.984 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 17:03:49.985 +03:00 [INF] Hosting environment: Development
2021-05-12 17:03:49.986 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 17:03:51.474 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 17:03:52.217 +03:00 [INF] Executed DbCommand (149ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 17:03:52.720 +03:00 [INF] Executed DbCommand (158ms) [Parameters=[@__roleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[RoleId], [t].[RoleCode], [t].[Title], [t0].[RoleId], [t0].[PermissionId], [t0].[PermissionId0], [t0].[EntityDefinitionCode], [t0].[PermissionCode]
FROM (
    SELECT TOP(1) [r].[RoleId], [r].[RoleCode], [r].[Title]
    FROM [Cofoundry].[Role] AS [r]
    WHERE [r].[RoleId] = @__roleId_0
) AS [t]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[PermissionId] AS [PermissionId0], [p].[EntityDefinitionCode], [p].[PermissionCode]
    FROM [Cofoundry].[RolePermission] AS [r0]
    INNER JOIN [Cofoundry].[Permission] AS [p] ON [r0].[PermissionId] = [p].[PermissionId]
) AS [t0] ON [t].[RoleId] = [t0].[RoleId]
ORDER BY [t].[RoleId], [t0].[RoleId], [t0].[PermissionId], [t0].[PermissionId0]
2021-05-12 17:03:52.864 +03:00 [INF] Executed DbCommand (107ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EntityDefinitionCode], [e].[Name]
FROM [Cofoundry].[EntityDefinition] AS [e]
2021-05-12 17:03:52.983 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PermissionId], [p].[EntityDefinitionCode], [p].[PermissionCode]
FROM [Cofoundry].[Permission] AS [p]
2021-05-12 17:03:53.119 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[RoleCode], [r].[Title], [t].[RoleId], [t].[PermissionId], [t].[PermissionId0], [t].[EntityDefinitionCode], [t].[PermissionCode]
FROM [Cofoundry].[Role] AS [r]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[PermissionId] AS [PermissionId0], [p].[EntityDefinitionCode], [p].[PermissionCode]
    FROM [Cofoundry].[RolePermission] AS [r0]
    INNER JOIN [Cofoundry].[Permission] AS [p] ON [r0].[PermissionId] = [p].[PermissionId]
) AS [t] ON [r].[RoleId] = [t].[RoleId]
ORDER BY [r].[RoleId], [t].[RoleId], [t].[PermissionId], [t].[PermissionId0]
2021-05-12 17:03:53.270 +03:00 [INF] "2021-05-12T14:03:52.4303575Z" SUCCESS executing command Cofoundry.Domain.RegisterPermissionsAndRolesCommand. User 1
2021-05-12 17:03:53.380 +03:00 [INF] Process completed
2021-05-12 17:04:40.442 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/account/refresh-token - -
2021-05-12 17:04:40.466 +03:00 [INF] CORS policy execution successful.
2021-05-12 17:04:40.507 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/account/refresh-token - - - 204 - - 65.5909ms
2021-05-12 17:04:40.545 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/account/refresh-token application/json 2
2021-05-12 17:04:40.549 +03:00 [INF] CORS policy execution successful.
2021-05-12 17:04:40.691 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/account/refresh-token application/json 2 - 404 0 - 146.0542ms
2021-05-12 17:05:13.158 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/account/refresh-token - -
2021-05-12 17:05:13.161 +03:00 [INF] CORS policy execution successful.
2021-05-12 17:05:13.161 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/account/refresh-token - - - 204 - - 3.6649ms
2021-05-12 17:05:13.190 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/account/refresh-token application/json 2
2021-05-12 17:05:13.192 +03:00 [INF] CORS policy execution successful.
2021-05-12 17:05:13.240 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/account/refresh-token application/json 2 - 404 0 - 35.4777ms
2021-05-12 17:05:16.841 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/account/login - -
2021-05-12 17:05:16.851 +03:00 [INF] CORS policy execution successful.
2021-05-12 17:05:16.853 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/account/login - - - 204 - - 12.3725ms
2021-05-12 17:05:16.863 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/account/login application/json 57
2021-05-12 17:05:16.870 +03:00 [INF] CORS policy execution successful.
2021-05-12 17:05:16.876 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/account/login application/json 57 - 404 0 - 13.2067ms
2021-05-12 17:05:42.447 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/account/login - -
2021-05-12 17:05:42.462 +03:00 [INF] CORS policy execution successful.
2021-05-12 17:05:42.463 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/account/login - - - 204 - - 16.9575ms
2021-05-12 17:05:42.495 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/account/login application/json 57
2021-05-12 17:05:42.509 +03:00 [INF] CORS policy execution successful.
2021-05-12 17:05:42.510 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/account/login application/json 57 - 404 0 - 14.9960ms
2021-05-12 17:05:44.255 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/account/refresh-token - -
2021-05-12 17:05:44.259 +03:00 [INF] CORS policy execution successful.
2021-05-12 17:05:44.262 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/account/refresh-token - - - 204 - - 9.1220ms
2021-05-12 17:05:44.272 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/account/refresh-token application/json 2
2021-05-12 17:05:44.274 +03:00 [INF] CORS policy execution successful.
2021-05-12 17:05:44.276 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/account/refresh-token application/json 2 - 404 0 - 3.9659ms
2021-05-12 17:05:55.088 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - -
2021-05-12 17:05:55.089 +03:00 [INF] CORS policy execution successful.
2021-05-12 17:05:55.093 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - - - 204 - - 6.0303ms
2021-05-12 17:05:55.104 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/auth/login application/json 57
2021-05-12 17:05:55.108 +03:00 [INF] CORS policy execution successful.
2021-05-12 17:05:55.122 +03:00 [INF] Executing endpoint 'Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin)'
2021-05-12 17:05:55.205 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(Cofoundry.Web.Identity.LoginViewModel) on controller Cofoundry.Web.Admin.AuthController (Cofoundry.Web.Admin).
2021-05-12 17:05:55.404 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2021-05-12 17:05:55.556 +03:00 [INF] Executed action Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin) in 324.8071ms
2021-05-12 17:05:55.562 +03:00 [INF] Executed endpoint 'Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin)'
2021-05-12 17:05:55.567 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/auth/login application/json 57 - 400 - application/problem+json;+charset=utf-8 462.3688ms
2021-05-12 17:06:57.032 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 17:06:57.221 +03:00 [INF] Starting service
2021-05-12 17:06:58.438 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 17:06:58.439 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 17:06:58.440 +03:00 [INF] Hosting environment: Development
2021-05-12 17:06:58.440 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 17:07:00.074 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 17:07:00.738 +03:00 [INF] Executed DbCommand (152ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 17:07:01.215 +03:00 [INF] Executed DbCommand (150ms) [Parameters=[@__roleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[RoleId], [t].[RoleCode], [t].[Title], [t0].[RoleId], [t0].[PermissionId], [t0].[PermissionId0], [t0].[EntityDefinitionCode], [t0].[PermissionCode]
FROM (
    SELECT TOP(1) [r].[RoleId], [r].[RoleCode], [r].[Title]
    FROM [Cofoundry].[Role] AS [r]
    WHERE [r].[RoleId] = @__roleId_0
) AS [t]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[PermissionId] AS [PermissionId0], [p].[EntityDefinitionCode], [p].[PermissionCode]
    FROM [Cofoundry].[RolePermission] AS [r0]
    INNER JOIN [Cofoundry].[Permission] AS [p] ON [r0].[PermissionId] = [p].[PermissionId]
) AS [t0] ON [t].[RoleId] = [t0].[RoleId]
ORDER BY [t].[RoleId], [t0].[RoleId], [t0].[PermissionId], [t0].[PermissionId0]
2021-05-12 17:07:01.381 +03:00 [INF] Executed DbCommand (115ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EntityDefinitionCode], [e].[Name]
FROM [Cofoundry].[EntityDefinition] AS [e]
2021-05-12 17:07:01.493 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PermissionId], [p].[EntityDefinitionCode], [p].[PermissionCode]
FROM [Cofoundry].[Permission] AS [p]
2021-05-12 17:07:01.632 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[RoleCode], [r].[Title], [t].[RoleId], [t].[PermissionId], [t].[PermissionId0], [t].[EntityDefinitionCode], [t].[PermissionCode]
FROM [Cofoundry].[Role] AS [r]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[PermissionId] AS [PermissionId0], [p].[EntityDefinitionCode], [p].[PermissionCode]
    FROM [Cofoundry].[RolePermission] AS [r0]
    INNER JOIN [Cofoundry].[Permission] AS [p] ON [r0].[PermissionId] = [p].[PermissionId]
) AS [t] ON [r].[RoleId] = [t].[RoleId]
ORDER BY [r].[RoleId], [t].[RoleId], [t].[PermissionId], [t].[PermissionId0]
2021-05-12 17:07:01.726 +03:00 [INF] "2021-05-12T14:07:00.9005136Z" SUCCESS executing command Cofoundry.Domain.RegisterPermissionsAndRolesCommand. User 1
2021-05-12 17:07:01.878 +03:00 [INF] Process completed
2021-05-12 17:07:03.500 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - -
2021-05-12 17:07:03.520 +03:00 [INF] CORS policy execution successful.
2021-05-12 17:07:03.547 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - - - 204 - - 50.3603ms
2021-05-12 17:07:03.580 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/auth/login application/json 57
2021-05-12 17:07:03.586 +03:00 [INF] CORS policy execution successful.
2021-05-12 17:07:03.687 +03:00 [INF] Executing endpoint 'Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin)'
2021-05-12 17:07:03.733 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(Cofoundry.Web.Identity.LoginViewModel) on controller Cofoundry.Web.Admin.AuthController (Cofoundry.Web.Admin).
2021-05-12 17:07:03.991 +03:00 [INF] Executing action method Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin) - Validation state: "Valid"
2021-05-12 17:07:13.812 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 17:07:13.885 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[@__query_Username_0='?' (Size = 150)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
WHERE (([u].[IsSystemAccount] <> CAST(1 AS bit)) AND ([u].[IsDeleted] <> CAST(1 AS bit))) AND ([u].[Username] = @__query_Username_0)
2021-05-12 17:07:13.927 +03:00 [INF] "2021-05-12T14:07:13.9257165Z" SUCCESS executing command Cofoundry.Domain.LogFailedLoginAttemptCommand. User null
2021-05-12 17:07:14.983 +03:00 [INF] Executed action Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin) in 11241.1237ms
2021-05-12 17:07:14.986 +03:00 [INF] Executed endpoint 'Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin)'
2021-05-12 17:07:14.993 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Cofoundry.Domain.InvalidCredentialsAuthenticationException: Invalid username or password
   at Cofoundry.Domain.Internal.LogUserInWithCredentialsCommandHandler.ExecuteAsync(LogUserInWithCredentialsCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\Domain\Users\Commands\LogUserInWithCredentialsCommandHandler.cs:line 50
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 137
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteCommandAsync[TCommand](TCommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 142
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteAsync(ICommand command, IExecutionContext executionContext) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 114
   at Cofoundry.Domain.CQS.Internal.CommandExecutor.ExecuteAsync(ICommand command) in C:\work\Github\PlatformFramework\src\Cofoundry.Domain\CQS\Framework\Command\CommandExecutor.cs:line 96
   at Cofoundry.Web.Identity.AuthenticationControllerHelper.LogUserInAsync(ControllerBase controller, ILoginViewModel vm) in C:\work\Github\PlatformFramework\src\Cofoundry.Web\Framework\Identity\ControllerHelpers\AuthenticationControllerHelper.cs:line 62
   at Cofoundry.Web.Admin.AuthController.Login(LoginViewModel command) in C:\work\Github\PlatformFramework\src\Cofoundry.Web.Admin\Admin\AuthController.cs:line 41
   at lambda_method306(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-05-12 17:07:15.169 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/auth/login application/json 57 - 500 - text/plain 11589.6774ms
2021-05-12 17:07:32.932 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - -
2021-05-12 17:07:32.935 +03:00 [INF] CORS policy execution successful.
2021-05-12 17:07:32.945 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - - - 204 - - 13.0084ms
2021-05-12 17:07:32.967 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/auth/login application/json 67
2021-05-12 17:07:32.970 +03:00 [INF] CORS policy execution successful.
2021-05-12 17:07:32.982 +03:00 [INF] Executing endpoint 'Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin)'
2021-05-12 17:07:32.983 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(Cofoundry.Web.Identity.LoginViewModel) on controller Cofoundry.Web.Admin.AuthController (Cofoundry.Web.Admin).
2021-05-12 17:07:33.024 +03:00 [INF] Executing action method Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin) - Validation state: "Valid"
2021-05-12 17:07:34.569 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 17:07:34.630 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[@__query_Username_0='?' (Size = 150)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
WHERE (([u].[IsSystemAccount] <> CAST(1 AS bit)) AND ([u].[IsDeleted] <> CAST(1 AS bit))) AND ([u].[Username] = @__query_Username_0)
2021-05-12 17:07:34.797 +03:00 [INF] AuthenticationScheme: Cookies signed out.
2021-05-12 17:07:34.831 +03:00 [INF] AuthenticationScheme: Cookies signed in.
2021-05-12 17:07:34.964 +03:00 [INF] Executed DbCommand (101ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE (([u].[UserId] = @__id_0) AND ([u].[IsDeleted] <> CAST(1 AS bit))) AND (([u].[IsSystemAccount] <> CAST(1 AS bit)) AND ([u].[IsDeleted] <> CAST(1 AS bit)))
2021-05-12 17:07:35.035 +03:00 [INF] Executed DbCommand (56ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
WHERE (([u].[UserId] = @__id_0) AND ([u].[IsDeleted] <> CAST(1 AS bit))) AND (([u].[IsSystemAccount] <> CAST(1 AS bit)) AND ([u].[IsDeleted] <> CAST(1 AS bit)))
2021-05-12 17:07:35.204 +03:00 [INF] Executed DbCommand (66ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Cofoundry].[User] SET [LastLoginDate] = @p0, [PreviousLoginDate] = @p1
WHERE [UserId] = @p2;
SELECT @@ROWCOUNT;
2021-05-12 17:07:35.241 +03:00 [INF] "2021-05-12T14:07:34.9705625Z" SUCCESS executing command Cofoundry.Domain.LogSuccessfulLoginCommand. User 2
2021-05-12 17:07:35.250 +03:00 [INF] "2021-05-12T14:07:34.5563053Z" SUCCESS executing command Cofoundry.Domain.LogUserInWithCredentialsCommand. User null
2021-05-12 17:07:46.167 +03:00 [INF] Executed action method Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin), returned result Microsoft.AspNetCore.Mvc.OkResult in 13132.8066ms.
2021-05-12 17:07:46.175 +03:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200
2021-05-12 17:07:46.177 +03:00 [INF] Executed action Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin) in 13189.0438ms
2021-05-12 17:07:46.179 +03:00 [INF] Executed endpoint 'Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin)'
2021-05-12 17:07:46.180 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/auth/login application/json 67 - 200 0 - 13212.7222ms
2021-05-12 17:14:20.333 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 17:14:20.491 +03:00 [INF] Starting service
2021-05-12 17:14:21.317 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 17:14:21.317 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 17:14:21.318 +03:00 [INF] Hosting environment: Development
2021-05-12 17:14:21.318 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 17:14:22.527 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 17:14:23.255 +03:00 [INF] Executed DbCommand (164ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 17:14:23.811 +03:00 [INF] Executed DbCommand (153ms) [Parameters=[@__roleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[RoleId], [t].[RoleCode], [t].[Title], [t0].[RoleId], [t0].[PermissionId], [t0].[PermissionId0], [t0].[EntityDefinitionCode], [t0].[PermissionCode]
FROM (
    SELECT TOP(1) [r].[RoleId], [r].[RoleCode], [r].[Title]
    FROM [Cofoundry].[Role] AS [r]
    WHERE [r].[RoleId] = @__roleId_0
) AS [t]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[PermissionId] AS [PermissionId0], [p].[EntityDefinitionCode], [p].[PermissionCode]
    FROM [Cofoundry].[RolePermission] AS [r0]
    INNER JOIN [Cofoundry].[Permission] AS [p] ON [r0].[PermissionId] = [p].[PermissionId]
) AS [t0] ON [t].[RoleId] = [t0].[RoleId]
ORDER BY [t].[RoleId], [t0].[RoleId], [t0].[PermissionId], [t0].[PermissionId0]
2021-05-12 17:14:24.039 +03:00 [INF] Executed DbCommand (118ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EntityDefinitionCode], [e].[Name]
FROM [Cofoundry].[EntityDefinition] AS [e]
2021-05-12 17:14:24.155 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PermissionId], [p].[EntityDefinitionCode], [p].[PermissionCode]
FROM [Cofoundry].[Permission] AS [p]
2021-05-12 17:14:24.317 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[RoleCode], [r].[Title], [t].[RoleId], [t].[PermissionId], [t].[PermissionId0], [t].[EntityDefinitionCode], [t].[PermissionCode]
FROM [Cofoundry].[Role] AS [r]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[PermissionId] AS [PermissionId0], [p].[EntityDefinitionCode], [p].[PermissionCode]
    FROM [Cofoundry].[RolePermission] AS [r0]
    INNER JOIN [Cofoundry].[Permission] AS [p] ON [r0].[PermissionId] = [p].[PermissionId]
) AS [t] ON [r].[RoleId] = [t].[RoleId]
ORDER BY [r].[RoleId], [t].[RoleId], [t].[PermissionId], [t].[PermissionId0]
2021-05-12 17:14:24.400 +03:00 [INF] "2021-05-12T14:14:23.4696652Z" SUCCESS executing command Cofoundry.Domain.RegisterPermissionsAndRolesCommand. User 1
2021-05-12 17:14:24.484 +03:00 [INF] Process completed
2021-05-12 17:14:37.040 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - -
2021-05-12 17:14:37.068 +03:00 [INF] CORS policy execution successful.
2021-05-12 17:14:37.100 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - - - 204 - - 68.9667ms
2021-05-12 17:14:37.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/auth/login application/json 67
2021-05-12 17:14:37.156 +03:00 [INF] CORS policy execution successful.
2021-05-12 17:14:37.345 +03:00 [INF] Executing endpoint 'Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin)'
2021-05-12 17:14:37.423 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(Cofoundry.Web.Identity.LoginViewModel) on controller Cofoundry.Web.Admin.AuthController (Cofoundry.Web.Admin).
2021-05-12 17:14:37.680 +03:00 [INF] Executing action method Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin) - Validation state: "Valid"
2021-05-12 17:14:39.549 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 17:14:39.756 +03:00 [INF] Executed DbCommand (191ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE (([u].[UserId] = @__id_0) AND ([u].[IsDeleted] <> CAST(1 AS bit))) AND (([u].[IsSystemAccount] <> CAST(1 AS bit)) AND ([u].[IsDeleted] <> CAST(1 AS bit)))
2021-05-12 17:14:39.773 +03:00 [INF] "2021-05-12T14:14:39.7686220Z" SUCCESS executing command Cofoundry.Domain.LogUserInWithCredentialsCommand. User 2
2021-05-12 17:14:43.253 +03:00 [INF] Executed DbCommand (115ms) [Parameters=[@__query_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
WHERE [u].[UserId] = @__query_UserId_0
2021-05-12 17:15:04.842 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 17:15:05.096 +03:00 [INF] Starting service
2021-05-12 17:15:06.139 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 17:15:06.140 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 17:15:06.141 +03:00 [INF] Hosting environment: Development
2021-05-12 17:15:06.141 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 17:15:07.603 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 17:15:08.455 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 17:15:08.889 +03:00 [INF] Executed DbCommand (145ms) [Parameters=[@__roleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[RoleId], [t].[RoleCode], [t].[Title], [t0].[RoleId], [t0].[PermissionId], [t0].[PermissionId0], [t0].[EntityDefinitionCode], [t0].[PermissionCode]
FROM (
    SELECT TOP(1) [r].[RoleId], [r].[RoleCode], [r].[Title]
    FROM [Cofoundry].[Role] AS [r]
    WHERE [r].[RoleId] = @__roleId_0
) AS [t]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[PermissionId] AS [PermissionId0], [p].[EntityDefinitionCode], [p].[PermissionCode]
    FROM [Cofoundry].[RolePermission] AS [r0]
    INNER JOIN [Cofoundry].[Permission] AS [p] ON [r0].[PermissionId] = [p].[PermissionId]
) AS [t0] ON [t].[RoleId] = [t0].[RoleId]
ORDER BY [t].[RoleId], [t0].[RoleId], [t0].[PermissionId], [t0].[PermissionId0]
2021-05-12 17:15:09.012 +03:00 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EntityDefinitionCode], [e].[Name]
FROM [Cofoundry].[EntityDefinition] AS [e]
2021-05-12 17:15:09.086 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PermissionId], [p].[EntityDefinitionCode], [p].[PermissionCode]
FROM [Cofoundry].[Permission] AS [p]
2021-05-12 17:15:09.204 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[RoleCode], [r].[Title], [t].[RoleId], [t].[PermissionId], [t].[PermissionId0], [t].[EntityDefinitionCode], [t].[PermissionCode]
FROM [Cofoundry].[Role] AS [r]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[PermissionId] AS [PermissionId0], [p].[EntityDefinitionCode], [p].[PermissionCode]
    FROM [Cofoundry].[RolePermission] AS [r0]
    INNER JOIN [Cofoundry].[Permission] AS [p] ON [r0].[PermissionId] = [p].[PermissionId]
) AS [t] ON [r].[RoleId] = [t].[RoleId]
ORDER BY [r].[RoleId], [t].[RoleId], [t].[PermissionId], [t].[PermissionId0]
2021-05-12 17:15:09.331 +03:00 [INF] "2021-05-12T14:15:08.6099929Z" SUCCESS executing command Cofoundry.Domain.RegisterPermissionsAndRolesCommand. User 1
2021-05-12 17:15:09.417 +03:00 [INF] Process completed
2021-05-12 17:15:10.368 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - -
2021-05-12 17:15:10.391 +03:00 [INF] CORS policy execution successful.
2021-05-12 17:15:10.422 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - - - 204 - - 60.0723ms
2021-05-12 17:15:10.439 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/auth/login application/json 67
2021-05-12 17:15:10.453 +03:00 [INF] CORS policy execution successful.
2021-05-12 17:15:10.582 +03:00 [INF] Executing endpoint 'Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin)'
2021-05-12 17:15:10.647 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(Cofoundry.Web.Identity.LoginViewModel) on controller Cofoundry.Web.Admin.AuthController (Cofoundry.Web.Admin).
2021-05-12 17:15:10.903 +03:00 [INF] Executing action method Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin) - Validation state: "Valid"
2021-05-12 17:15:12.535 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 17:15:12.628 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE (([u].[UserId] = @__id_0) AND ([u].[IsDeleted] <> CAST(1 AS bit))) AND (([u].[IsSystemAccount] <> CAST(1 AS bit)) AND ([u].[IsDeleted] <> CAST(1 AS bit)))
2021-05-12 17:15:12.635 +03:00 [INF] "2021-05-12T14:15:12.6322218Z" SUCCESS executing command Cofoundry.Domain.LogUserInWithCredentialsCommand. User 2
2021-05-12 17:15:13.925 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[@__query_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
WHERE [u].[UserId] = @__query_UserId_0
2021-05-12 17:16:41.129 +03:00 [INF] User profile is available. Using 'C:\Users\Max\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-05-12 17:16:41.281 +03:00 [INF] Starting service
2021-05-12 17:16:42.233 +03:00 [INF] Now listening on: http://localhost:5000
2021-05-12 17:16:42.234 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-05-12 17:16:42.235 +03:00 [INF] Hosting environment: Development
2021-05-12 17:16:42.235 +03:00 [INF] Content root path: C:\work\Github\PlatformFramework\samples\Web.Service.Identity
2021-05-12 17:16:43.462 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 17:16:44.048 +03:00 [INF] Executed DbCommand (97ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE ([u].[IsDeleted] <> CAST(1 AS bit)) AND ([u].[IsSystemAccount] = CAST(1 AS bit))
2021-05-12 17:16:44.479 +03:00 [INF] Executed DbCommand (172ms) [Parameters=[@__roleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[RoleId], [t].[RoleCode], [t].[Title], [t0].[RoleId], [t0].[PermissionId], [t0].[PermissionId0], [t0].[EntityDefinitionCode], [t0].[PermissionCode]
FROM (
    SELECT TOP(1) [r].[RoleId], [r].[RoleCode], [r].[Title]
    FROM [Cofoundry].[Role] AS [r]
    WHERE [r].[RoleId] = @__roleId_0
) AS [t]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[PermissionId] AS [PermissionId0], [p].[EntityDefinitionCode], [p].[PermissionCode]
    FROM [Cofoundry].[RolePermission] AS [r0]
    INNER JOIN [Cofoundry].[Permission] AS [p] ON [r0].[PermissionId] = [p].[PermissionId]
) AS [t0] ON [t].[RoleId] = [t0].[RoleId]
ORDER BY [t].[RoleId], [t0].[RoleId], [t0].[PermissionId], [t0].[PermissionId0]
2021-05-12 17:16:44.620 +03:00 [INF] Executed DbCommand (105ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EntityDefinitionCode], [e].[Name]
FROM [Cofoundry].[EntityDefinition] AS [e]
2021-05-12 17:16:44.789 +03:00 [INF] Executed DbCommand (94ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PermissionId], [p].[EntityDefinitionCode], [p].[PermissionCode]
FROM [Cofoundry].[Permission] AS [p]
2021-05-12 17:16:44.909 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[RoleCode], [r].[Title], [t].[RoleId], [t].[PermissionId], [t].[PermissionId0], [t].[EntityDefinitionCode], [t].[PermissionCode]
FROM [Cofoundry].[Role] AS [r]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[PermissionId] AS [PermissionId0], [p].[EntityDefinitionCode], [p].[PermissionCode]
    FROM [Cofoundry].[RolePermission] AS [r0]
    INNER JOIN [Cofoundry].[Permission] AS [p] ON [r0].[PermissionId] = [p].[PermissionId]
) AS [t] ON [r].[RoleId] = [t].[RoleId]
ORDER BY [r].[RoleId], [t].[RoleId], [t].[PermissionId], [t].[PermissionId0]
2021-05-12 17:16:44.975 +03:00 [INF] "2021-05-12T14:16:44.2007172Z" SUCCESS executing command Cofoundry.Domain.RegisterPermissionsAndRolesCommand. User 1
2021-05-12 17:16:45.167 +03:00 [INF] Process completed
2021-05-12 17:16:47.021 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - -
2021-05-12 17:16:47.035 +03:00 [INF] CORS policy execution successful.
2021-05-12 17:16:47.055 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - - - 204 - - 38.4626ms
2021-05-12 17:16:47.070 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/auth/login application/json 67
2021-05-12 17:16:47.072 +03:00 [INF] CORS policy execution successful.
2021-05-12 17:16:47.174 +03:00 [INF] Executing endpoint 'Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin)'
2021-05-12 17:16:47.219 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(Cofoundry.Web.Identity.LoginViewModel) on controller Cofoundry.Web.Admin.AuthController (Cofoundry.Web.Admin).
2021-05-12 17:16:47.505 +03:00 [INF] Executing action method Cofoundry.Web.Admin.AuthController.Login (Cofoundry.Web.Admin) - Validation state: "Valid"
2021-05-12 17:16:50.088 +03:00 [INF] Entity Framework Core 5.0.5 initialized 'CofoundryDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-05-12 17:16:50.177 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username], [r].[RoleId], [r].[RoleCode], [r].[Title]
FROM [Cofoundry].[User] AS [u]
INNER JOIN [Cofoundry].[Role] AS [r] ON [u].[RoleId] = [r].[RoleId]
WHERE (([u].[UserId] = @__id_0) AND ([u].[IsDeleted] <> CAST(1 AS bit))) AND (([u].[IsSystemAccount] <> CAST(1 AS bit)) AND ([u].[IsDeleted] <> CAST(1 AS bit)))
2021-05-12 17:16:50.186 +03:00 [INF] "2021-05-12T14:16:50.1835084Z" SUCCESS executing command Cofoundry.Domain.LogUserInWithCredentialsCommand. User 2
2021-05-12 17:16:52.072 +03:00 [INF] Executed DbCommand (65ms) [Parameters=[@__query_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserId], [u].[CreateDate], [u].[CreatorId], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[IsEmailConfirmed], [u].[IsSystemAccount], [u].[LastLoginDate], [u].[LastName], [u].[LastPasswordChangeDate], [u].[Password], [u].[PreviousLoginDate], [u].[RequirePasswordChange], [u].[RoleId], [u].[Username]
FROM [Cofoundry].[User] AS [u]
WHERE [u].[UserId] = @__query_UserId_0
